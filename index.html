<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>은사 발견 검사 (50문항)</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      line-height: 1.5;
      max-width: 900px;
      margin: 20px auto;
      padding: 0 16px 40px;
      background: #f5f5f7;
      color: #222;
    }
    h1, h2, h3 {
      text-align: center;
    }
    .desc {
      background: #ffffff;
      border-radius: 8px;
      padding: 12px 16px;
      margin-bottom: 20px;
      font-size: 0.95rem;
      border: 1px solid #ddd;
    }
    .question {
      background: #ffffff;
      border-radius: 8px;
      padding: 10px 14px;
      margin-bottom: 10px;
      border: 1px solid #e0e0e0;
    }
    .q-header {
      font-weight: 600;
      margin-bottom: 4px;
      color: #333;
    }
    .options {
      margin-top: 4px;
      font-size: 0.9rem;
    }
    .options label {
      margin-right: 14px;
      cursor: pointer;
    }
    .scale-legend {
      font-size: 0.9rem;
      margin-bottom: 10px;
      padding: 8px 10px;
      background: #fff;
      border-radius: 8px;
      border: 1px solid #ddd;
    }
    button {
      display: block;
      margin: 24px auto;
      padding: 10px 22px;
      font-size: 1rem;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #2563eb;
      color: #fff;
      font-weight: 600;
    }
    button:hover {
      background: #1d4ed8;
    }
    #result {
      margin-top: 24px;
      padding: 16px 18px;
      background: #ffffff;
      border-radius: 10px;
      border: 1px solid #d4d4d8;
    }
    #result h2 {
      margin-top: 0;
      margin-bottom: 8px;
    }
    .scores-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 0.9rem;
    }
    .scores-table th, .scores-table td {
      border: 1px solid #e4e4e7;
      padding: 6px 8px;
      text-align: center;
    }
    .scores-table th {
      background: #f4f4f5;
    }
    .top-rank {
      margin-top: 12px;
      padding: 10px 12px;
      background: #eff6ff;
      border-radius: 8px;
      border: 1px solid #bfdbfe;
      font-size: 0.95rem;
    }
    .warning {
      color: #b91c1c;
      font-size: 0.9rem;
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <h1>은사 발견 검사</h1>
  <h3>50문항 · 10개 영역 · 자동 점수 계산</h3>

  <div class="desc">
    이 검사는 50개의 문항을 통해 다음 10가지 은사 영역을 살펴봅니다.<br />
    <strong>예언, 목회, 가르침, 지식, 권면, 구제, 돕기, 선교, 지도력, 중보기도</strong><br /><br />
    각 문항에 대해 아래 기준에 따라 응답해 주세요.
  </div>

  <div class="scale-legend">
    <strong>응답 기준 (4점 척도)</strong><br />
    0점: 전혀 아니다 &nbsp;&nbsp;|&nbsp;&nbsp;
    1점: 아니다 &nbsp;&nbsp;|&nbsp;&nbsp;
    2점: 그렇다 &nbsp;&nbsp;|&nbsp;&nbsp;
    3점: 매우 그렇다
  </div>

  <form id="giftsForm"></form>

  <button type="button" onclick="calculateScores()">결과 보기</button>

  <div id="result" style="display:none;">
    <h2>검사 결과</h2>
    <div id="warning" class="warning" style="display:none;">
      응답하지 않은 문항이 있습니다. 가능한 모든 문항에 응답해 주세요.
    </div>
    <div id="scores"></div>
    <div id="topRanks" class="top-rank"></div>
  </div>

  <script>
    // 50문항 텍스트
    const questions = [
      "하나님으로부터 직접 말씀을 받아 다른 사람을 교훈하고, 권면하고, 위로하고 싶은 열망이 있다.",
      "나는 일정한 그룹의 사람들과 오랫동안 관계를 지속하고 있으며, 개인적으로 그들의 성공과 실패에 함께하기를 좋아한다.",
      "사람들은 나의 도움으로 성경의 진리를 배우게 되었다고 말한다.",
      "사람들은 나의 도움으로 성경의 핵심과 중요한 사실들을 분별하게 되었다고 말한다.",
      "나는 자포자기 하는 사람들, 고통 당하는 사람들, 또는 낙심한 사람들에게 말로 용기를 준다.",
      "나는 주님의 일을 위해 아낌없이 바치려고 돈을 잘 관리하고 있다.",
      "나는 교회 지도자들이 그들 본연의 사명에 충실할 수 있도록 여러 방면에서 돕는다.",
      "다른 인종의 사람들과 편하게 이야기할 수 있으며, 그들 역시 나에게 마음을 열어주는 것 같다.",
      "내가 말을 하면 사람들이 잘 듣고 따르는 것 같다.",
      "매일 최소한 한 시간씩 기도한다.",
      "나는 하나님을 통해서 미래에 발생할 중요한 일을 미리 알 수 있다.",
      "다른 그리스도인들의 영적인 성장을 책임지고, 그 책임을 감당하는 일이 즐겁다.",
      "그리스도의 몸 된 교회의 건강과 사역에 관한 신약성경의 가르침을 적절하게 설명할 수 있다.",
      "내게는 영적 진리에 대한 통찰력이 있는데, 사람들은 그 덕에 하나님께 더 가까이 갈 수 있었다고 말한다.",
      "다른 사람들을 사역에 참여시키기 위해 그들을 효율적으로 격려한다.",
      "주님의 일을 위해 내 수입의 10분의 1 이상을 바친다.",
      "사람들은 나의 도움으로 그들의 사역을 더욱 잘 감당하게 되었다고 말한다.",
      "다른 문화권 사람들에게 사역하기 위해 그들의 언어를 배울 수 있다고 생각한다.",
      "사람들이 나를 신뢰하고 내 지도력에 잘 따른다.",
      "누가 기도를 부탁하면, 그것을 놓고 최소한 며칠 동안 기도한다.",
      "사람들은 내가 하나님으로부터 직접 받은 것이 확실한, 시기 적절하고도 급박한 메시지를 그들에게 전달해준다고 말한다.",
      "다른 사람들에게 영적인 지침을 주고, 그들을 영적으로 인도하는 데 두려움이 없다.",
      "다른 사람들에게 새로운 성경의 진리를 전하기 위해 상당히 많은 시간을 할애하여 성경을 공부한다.",
      "나는 성경공부와 신앙체험을 통해 하나님께서 하나님나라의 확장을 위해 사용하시는 주요 전략과 방법을 뚜렷하게 인식하고 있다.",
      "고통과 불행에 처한 사람들이 나를 찾아 오며, 나에게서 힘을 얻어 마음이 편안해졌으며 문제 해결을 받았다고 말한다.",
      "하나님의 일을 위해 물질을 바쳐야 한다고 생각하면, 필요한 돈을 떼어 드린다.",
      "다른 사람들이 효율적으로 사역을 감당하는데 도움이 된다면, 단순하게 반복되는 일이라도 즐겁게 한다.",
      "타문화권에 속한 사람들 혹은 피부색이 다른 사람들에게 마음이 끌리며, 그들과 좋은 관계를 유지한다.",
      "내가 목표를 정하면, 다른 사람들도 그 목표를 기꺼이 수용한다.",
      "시간 날 때마다 다른 사람들을 위해 중보 기도하는 것이 좋다.",
      "어떤 특정한 상황에서 하나님께서 그들에게 무엇을 말씀하고 싶어하시는지 나는 분명히 감지한다.",
      "동료 그리스도인들에게 관련 성구를 제시하고 함께 기도함으로써 그들을 돕는다.",
      "성경의 진리를 다른 사람들에게 전할 수 있으며, 이로써 그들의 지식과 태도와 가치와 행동이 변화되는 것을 목격한다.",
      "성경의 진리를 새로이 알기 위해 공부와 독서를 계속한다.",
      "혼란에 빠진 사람들, 죄를 범한 사람들, 마약이나 술에 중독된 사람들을 효과적으로 상담해주고 싶은 열망이 있다.",
      "하나님께서 내 필요를 모두 채워 주시리라 확신하기 때문에, 헌신적으로 또한 지속적으로 하나님께 바칠 수 있다.",
      "아무도 모르게 남을 돕는 일이 즐겁다.",
      "더 많은 사람에게 그리스도를 전할 수 있다면, 내게 주어진 안락한 환경을 기꺼이 포기할 마음이 있다.",
      "내가 어떤 단체에 들어갔을 때 사람들이 내가 지도력을 발휘하기를 기대하는 것 같다.",
      "사람들은 내가 그들을 위해 드린 중보기도가 구체적으로 응답 받는다고 말한다.",
      "나는 가끔 하나님께서 어느 특정한 시기에 사역과 관련하여 무엇을 하기 원하시는지 정확히 안다고 느낄 때가 있다.",
      "사람들이 나 때문에 신앙(교회생활, 성도의 교제 등)을 회복했다고 말한다.",
      "성경을 공부하고, 거기서 깨달은 바를 다른 사람들과 나눌 때 만족감을 느낀다.",
      "말씀을 묵상하거나 어떤 상황을 직접 관찰함으로써 나에 관한 새로운 진리를 발견하는 능력이 있다.",
      "고난과 고통에 처한 사람들에게 성경에서 해결책을 찾으라고 권한다.",
      "하나님의 사역을 위해서라면, 가난한 삶도 기꺼이 감수할 자세가 되어 있다.",
      "주님을 위해 봉사할 때, 누가 그 공로를 인정받든 신경 쓰지 않는다.",
      "무엇보다도, 다른 나라 사람들이 그리스도를 영접하는 것을 지켜보고 싶은 강한 열망이 있다.",
      "내가 책임을 맡으면, 모든 일이 순조롭게 진행되는 것 같다.",
      "기도하면 하나님께서 내게 직접 말씀하시며, 나는 하나님의 음성을 들을 수 있다."
    ];

    // 영역 이름
    const areaNames = [
      "예언의 은사",
      "목회",
      "가르침",
      "지식",
      "권면",
      "구제",
      "돕기",
      "선교",
      "지도력",
      "중보기도"
    ];

    // 영역별 문항 번호 (1-based index)
    const areaQuestions = [
      [1, 11, 21, 31, 41],   // 예언
      [2, 12, 22, 32, 42],   // 목회
      [3, 13, 23, 33, 43],   // 가르침
      [4, 14, 24, 34, 44],   // 지식
      [5, 15, 25, 35, 45],   // 권면
      [6, 16, 26, 36, 46],   // 구제
      [7, 17, 27, 37, 47],   // 돕기
      [8, 18, 28, 38, 48],   // 선교
      [9, 19, 29, 39, 49],   // 지도력
      [10, 20, 30, 40, 50]   // 중보기도
    ];

    // 은사 설명
    const giftDescriptions = {
      "예언의 은사": "하나님의 뜻을 분별하고 상황 속에서 영적 메시지를 전달하는 능력.",
      "목회": "사람들을 돌보고 양육하며, 공동체의 영적 성장을 책임지는 능력.",
      "가르침": "성경의 진리를 명확하게 설명하고 이해시키는 능력.",
      "지식": "하나님의 말씀과 진리를 깊이 이해하고 통찰하는 능력.",
      "권면": "낙심한 사람들에게 용기와 위로를 주고, 신앙적으로 격려하는 능력.",
      "구제": "물질과 자원을 기꺼이 나누며, 필요를 채우는 데 기쁨을 느끼는 능력.",
      "돕기": "보이지 않는 곳에서 묵묵히 섬기며, 사역이 원활하게 이루어지도록 지원하는 능력.",
      "선교": "다른 문화권 사람들에게 복음을 전하고 그들과 자연스럽게 관계를 맺는 능력.",
      "지도력": "사람들을 이끌고 방향을 제시하며, 공동체를 조직적으로 움직이는 능력.",
      "중보기도": "다른 사람을 위해 깊이 기도하며, 기도의 응답을 경험하는 능력."
    };

    // 은사 사용 예시
    const giftUsageExamples = {
      "예언의 은사": "공동체가 하나님의 뜻을 분별하도록 돕고, 기도 모임이나 소그룹에서 영적 통찰을 나누며, 상황 속에서 하나님의 마음을 전달해 위로와 방향을 제시할 수 있습니다.",
      "목회": "소그룹 리더나 셀 리더로 섬기며, 어려움을 겪는 사람들을 꾸준히 돌보고 상담하고, 공동체의 영적·정서적 건강을 책임지는 역할을 감당할 수 있습니다.",
      "가르침": "성경공부 인도, 제자훈련 리더, 교육 사역에서 복잡한 내용을 쉽게 설명하고, 청소년·청년·장년 교육팀에서 교재를 개발하거나 강의를 맡을 수 있습니다.",
      "지식": "성경 연구와 자료 정리를 통해 설교자나 교사를 돕고, 공동체가 진리를 더 깊이 이해하도록 신학적·성경적 배경을 제공하는 역할을 할 수 있습니다.",
      "권면": "낙심한 사람을 격려하고 회복시키는 상담 사역, 새신자 정착과 양육 사역, 공동체 분위기를 세우는 ‘격려자’ 역할을 감당할 수 있습니다.",
      "구제": "어려운 이웃을 돕는 구제 사역, 선교 후원, 물질과 시간을 기꺼이 나누며 필요를 발견하면 먼저 움직이는 실천형 사역에 참여할 수 있습니다.",
      "돕기": "예배 세팅, 행사 준비, 행정 및 실무 지원 등 보이지 않는 곳에서 사역이 원활하게 이루어지도록 돕는 역할을 감당할 수 있습니다.",
      "선교": "해외·국내 선교팀에 참여하고, 다문화 가정이나 외국인 노동자 사역에 헌신하며, 복음 전파와 관계 형성에 자연스럽게 쓰임 받을 수 있습니다.",
      "지도력": "팀 리더, 부서장, 프로젝트 총괄로 섬기며, 방향을 제시하고 목표를 설정하며, 공동체를 하나로 모아 움직이는 역할을 감당할 수 있습니다.",
      "중보기도": "기도팀과 중보기도 모임에서 핵심 역할을 하며, 공동체의 필요와 위기를 위해 지속적으로 기도하고, 영적 전쟁과 보호를 위한 보이지 않는 사역을 감당할 수 있습니다."
    };

    // 폼에 질문 렌더링
    const form = document.getElementById("giftsForm");

    questions.forEach((q, idx) => {
      const qNum = idx + 1;
      const div = document.createElement("div");
      div.className = "question";

      const header = document.createElement("div");
      header.className = "q-header";
      header.textContent = qNum + ". " + q;
      div.appendChild(header);

      const optionsDiv = document.createElement("div");
      optionsDiv.className = "options";

      const options = [
        { value: 0, label: "0점: 전혀 아니다" },
        { value: 1, label: "1점: 아니다" },
        { value: 2, label: "2점: 그렇다" },
        { value: 3, label: "3점: 매우 그렇다" }
      ];

      options.forEach(opt => {
        const id = `q${qNum}_${opt.value}`;
        const label = document.createElement("label");
        const input = document.createElement("input");
        input.type = "radio";
        input.name = `q${qNum}`;
        input.value = opt.value;
        input.id = id;
        label.setAttribute("for", id);
        label.textContent = opt.label;
        label.prepend(input);
        optionsDiv.appendChild(label);
      });

      div.appendChild(optionsDiv);
      form.appendChild(div);
    });

    function calculateScores() {
      const scoresByArea = new Array(10).fill(0);
      let unanswered = [];

      // 각 문항 점수 수집
      for (let i = 1; i <= 50; i++) {
        const radios = document.getElementsByName("q" + i);
        let selected = null;
        for (const r of radios) {
          if (r.checked) {
            selected = parseInt(r.value, 10);
            break;
          }
        }
        if (selected === null) {
          unanswered.push(i);
        } else {
          // 이 문항이 속한 영역에 점수 더하기
          areaQuestions.forEach((arr, areaIdx) => {
            if (arr.includes(i)) {
              scoresByArea[areaIdx] += selected;
            }
          });
        }
      }

      const resultDiv = document.getElementById("result");
      const warningDiv = document.getElementById("warning");
      const scoresDiv = document.getElementById("scores");
      const topRanksDiv = document.getElementById("topRanks");

      resultDiv.style.display = "block";

      if (unanswered.length > 0) {
        warningDiv.style.display = "block";
        warningDiv.textContent =
          "응답하지 않은 문항이 있습니다: " + unanswered.join(", ");
      } else {
        warningDiv.style.display = "none";
      }

      // 점수 표 생성
      let tableHtml = '<table class="scores-table">';
      tableHtml += "<tr><th>영역</th><th>은사</th><th>점수 (최대 15점)</th></tr>";
      scoresByArea.forEach((score, idx) => {
        tableHtml += `<tr>
          <td>${idx + 1}</td>
          <td>${areaNames[idx]}</td>
          <td>${score}</td>
        </tr>`;
      });
      tableHtml += "</table>";
      scoresDiv.innerHTML = tableHtml;

      // 상위 3개 영역 계산
      const indexedScores = scoresByArea.map((score, idx) => ({
        areaIndex: idx,
        name: areaNames[idx],
        score
      }));

      indexedScores.sort((a, b) => b.score - a.score);

      const top3 = indexedScores.slice(0, 3);

      let topHtml = "<strong>상위 3개 은사 영역</strong><br />";
      top3.forEach((item, rank) => {
        topHtml += `${rank + 1}순위: ${item.name} (${item.score}점)<br />`;
      });

      // 상위 은사 설명 + 사용 예시
      let descHtml = "<br><strong>상위 은사 소개 및 사용 예시</strong><br><br>";

      top3.forEach(item => {
        const name = item.name;
        const shortName = name.replace("의 은사", ""); // 예언의 은사 → 예언
        descHtml += `
          <div style="
            margin-bottom: 12px;
            padding: 12px;
            border-radius: 8px;
            background: #fafafa;
            border: 1px solid #ddd;
          ">
            <strong>${name}</strong><br>
            <span>${giftDescriptions[shortName] || giftDescriptions[name] || ""}</span><br><br>
            <em>이 은사를 어떻게 사용할 수 있을까요?</em><br>
            <span>${giftUsageExamples[shortName] || giftUsageExamples[name] || ""}</span>
          </div>
        `;
      });

      topRanksDiv.innerHTML = topHtml + descHtml;
    }
  </script>
</body>
</html>
